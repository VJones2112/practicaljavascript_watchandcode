<!DOCTYPE html>

<html lang="en">

<head>

    <title>Practical JavaScript</title>
    <meta charset="UTF-8">
    <meta name="description" content="This is what Google will show.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href=>
    <link rel="stylesheet" href=>
    <!-- <script src="/script.js"></script> -->
</head>

<body>
    <h1>To-Do List</h1>

    <!-- <button id="displayTodosButton">Display To-Dos</button>
<button id="toggleAllButton">Toggle All</button> -->

<!-- We deleted the Display Todos button when we escaped the console! -->
    <!-- <div>
        <button onclick="handlers.displayTodos()">Display To-Dos</button>
        <button onclick="handlers.toggleAll()">Toggle All</button>
    </div> -->
    <div>
        <button onclick="handlers.addTodo()">Add</button>
        <input id="addTodoTextInput" type="text">
    </div>

    <div>
        <button onclick="handlers.changeTodo()">Change To-Do</button>
        <input id="changeTodoPositionInput" type="number">
        <input id="changeTodoTextInput" type="text">
    </div>

    <div>
        <button onclick="handlers.deleteTodo()">Delete</button>
        <input id="deleteTodoPositionInput" type="number">
    </div>

    <div>
        <button onclick="handlers.toggleCompleted()">Toggle Completed</button>
        <input id="toggleCompletedPositionInput" type="number">
    </div>

    <ul>
    </ul>


    <!-- <h2>Subsection Title</h2> -->
    <!-- <h3>Subsection Title</h3> -->
    <!-- <p>For Text</p> -->

    <script>
        let todoList = {
            // when setting value of property as below, don't end with a semicolon.
            todos: [],
            // DON'T NEED THIS ANYMORE SINCE WE'RE DOING IT IN THE DOM TO ESCAPE CONSOLE!
            //displayTodos: function() {
            //     // debugger;
            //     if (this.todos.length === 0) {
            //         console.log('Your to-do list is empty!');
            //     } else {
            //         console.log('My To-Dos:');
            //         for (let i = 0; i < this.todos.length; i++) {
            //             if (this.todos[i].completed === true) {
            //                 console.log('(x)', this.todos[i].todoText);
            //             } else {
            //                 console.log('( )', this.todos[i].todoText);
            //             }
            //         }
            //     }
            // },
            //adding a todo item into the list and displaying it.
            addTodo: function(todoText) {
                // debugger;
                this.todos.push({
                    // First todoText is name of property and 2nd is the parameter w/in function.
                    todoText: todoText,
                    completed: false
                });
                // this.displayTodos();
            },
            changeTodo: function(position, todoText) {
                // debugger;
                // Below we are changing the todoText based on a position by passing in todoText.
                this.todos[position].todoText = todoText;
                // this.displayTodos();
            },
            deleteTodo: function(position) {
                // debugger;
                this.todos.splice(position, 1);
                // this.displayTodos();
            },
            toggleCompleted: function(position) {
                // debugger;
                let todo = this.todos[position];
                todo.completed = !todo.completed;
                // this.displayTodos();
            },
            toggleAll: function() {
                // debugger;
                let totalTodos = this.todos.length;
                let completedTodos = 0;
                // Below get number of completed todos.
                for (let i = 0; i < totalTodos; i++) {
                    if (this.todos[i].completed === true) {
                        completedTodos++;
                    }
                }
                // If everything is true, make everything false.
                if (completedTodos === totalTodos) {
                    for (let i = 0; i < totalTodos; i++) {
                        this.todos[i].completed = false;
                    }
                    //Otherwise make everything true.
                } else {
                    for (let i = 0; i < totalTodos; i++) {
                        this.todos[i].completed = true;
                    }
                }
                // this.displayTodos();
            }
        };
        
        //ALL THE CODE BELOW WAS REFACTORED//
        // The code below gives us access to the display todos button.
        // let displayTodosButton = document.getElementById('displayTodosButton');
        
        // The code eblow runs displayTodos method when user clicks displayTodosButton.
        // displayTodosButton.addEventListener('click', function() {
        //   todoList.displayTodos();
        // })
        // The code below does what above did but for the toggleAllButton
        // let toggleAllButton = document.getElementById('toggleAllButton');
        // toggleAllButton.addEventListener('click', function() {
        //   todoList.toggleAll();
        // });
        
        let handlers = {
        
            // Got rid of this handler when we deleted the Display Todos button to escape the console!
            // displayTodos: function() {
            //     todoList.displayTodos();
            // },
        
            addTodo: function() {
                let addTodoTextInput = document.getElementById('addTodoTextInput');
                todoList.addTodo(addTodoTextInput.value);
                addTodoTextInput.value = '';
                //The line above is to clear the input after you type something in rather than having that text stay there.
                view.displayTodos();
            },
            changeTodo: function() {
                let changeTodoPositionInput = document.getElementById('changeTodoPositionInput');
                let changeTodoTextInput = document.getElementById('changeTodoTextInput');
                todoList.changeTodo(changeTodoPositionInput.valueAsNumber, changeTodoTextInput.value);
                //Above if we had used .value it would return a string, not number.
                changeTodoTextInput.value = '';
                changeTodoPositionInput = '';
                view.displayTodos();
            },
            deleteTodo: function() {
                let deleteTodoPositionInput = document.getElementById('deleteTodoPositionInput');
                todoList.deleteTodo(deleteTodoPositionInput.valueAsNumber);
                deleteTodoPositionInput.value = '';
                view.displayTodos();
            },
            toggleCompleted: function() {
                let toggleCompletedPositionInput = document.getElementById('toggleCompletedPositionInput');
                todoList.toggleCompleted(toggleCompletedPositionInput.valueAsNumber);
                toggleCompletedPositionInput.value = '';
                view.displayTodos();
            },
            toggleAll: function() {
                todoList.toggleAll();
                view.displayTodos();
            }
        };
        //View doesn't do anything but render data to the screen.
        let view = {
            displayTodos: function() {
                let todoUl = document.querySelector('ul');
                todoUl.innerHTML = '';
                //The above sets whatever html was created to clear so that view.displayTodos() doesn't keep adding bullets.
                //Below creates a list item for each item in the todos array and then append it to the todos ul.
                for (let i = 0; i < todoList.todos.length; i++) {
                    let todoLi = document.createElement('li');
                    let todo = todoList.todos[i];
                    //Created variable above so we don't have to repeat code.
                    let todoTextWithCompletion = '';
                    
                    if (todo.completed === true) {
                        todoTextWithCompletion = '(x) ' + todo.todoText;
                    } else {
                        todoTextWithCompletion = '( ) ' + todo.todoText;
                    }
        
                    todoLi.textContent = todoTextWithCompletion;
                    //Below takes the todo li element, accessing the text content in the li, and setting it to the text property of each item.
                    //Became unnecessary: todoLi.textContent = todoList.todos[i].todoText;
                    todoUl.appendChild(todoLi);
                }
            }
        }
        
        
        </script>

</body>

</html>
